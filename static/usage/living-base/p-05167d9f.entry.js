import{r as t,c as e,h as a,H as i}from"./p-f27c1a9d.js";const s=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r=["日","一","二","三","四","五","六"],h=[{value:1,label:"一月"},{value:2,label:"二月"},{value:3,label:"三月"},{value:4,label:"四月"},{value:5,label:"五月"},{value:6,label:"六月"},{value:7,label:"七月"},{value:8,label:"八月"},{value:9,label:"九月"},{value:10,label:"十月"},{value:11,label:"十一月"},{value:12,label:"十二月"}],d={D:t=>t.getDay(),DD:t=>n(t.getDay()),d:t=>t.getDate(),dd:t=>n(t.getDate()),M:t=>t.getMonth()+1,MM:t=>n(t.getMonth()+1),yy:t=>String(t.getFullYear()).substr(2),yyyy:t=>t.getFullYear(),h:t=>t.getHours()%12||12,hh:t=>n(t.getHours()%12||12),H:t=>t.getHours(),HH:t=>n(t.getHours()),m:t=>t.getMinutes(),mm:t=>n(t.getMinutes()),s:t=>t.getSeconds(),ss:t=>n(t.getSeconds()),S:t=>Math.round(t.getMilliseconds()/100),SS:t=>n(Math.round(t.getMilliseconds()/10),2),SSS:t=>n(t.getMilliseconds(),3)};function n(t,e){let a=String(t);for(e=e||2;a.length<e;)a="0"+a;return a}const o=class{constructor(i){t(this,i),this.liChange=e(this,"liChange",7),this.firstDay=0,this.lastDay=0,this.yearRegion=[],this.preBtnDisabled=!1,this.nextBtnDisabled=!1,this.clickType="day",this.value=new Date,this._hasPreviousPage=()=>"day"===this.clickType?!(this.minDateState.getFullYear()===this.year&&this.minDateState.getMonth()===this.month):"month"===this.clickType?void 0===this.minDate||!(this.minDateState.getFullYear()===this.year):"year"===this.clickType?void 0===this.minDate||this.minDateState.getFullYear()<this.yearRegion[0]:void 0,this._hasNextPage=()=>"day"===this.clickType?!(this.maxDateState.getFullYear()===this.year&&this.maxDateState.getMonth()===this.month):"month"===this.clickType?void 0===this.maxDate||!(this.maxDateState.getFullYear()===this.year):"year"===this.clickType?void 0===this.maxDate||this.maxDateState.getFullYear()>this.yearRegion[1]:void 0,this.getDate=(t,e)=>{this.year!==t&&(this.year=t),this.month!==e&&(this.month=e);const a=new Date(t,e+1,0).getDate();this.firstDay=+new Date(t,e,1),this.lastDay=+new Date(t,e,a);const i=new Date(t,e,1),s=i.getDay(),r=+i-24*s*60*60*1e3,h=[];for(let t=0;t<42;t++)h[t]=new Date(r+24*t*60*60*1e3);this.currentDays=h},this.yearCommon=t=>{const e=[];for(let a=0;a<10;a++)e.push(t++);this.yearRegion=[e[0],e[e.length-1]],this.yearList=e},this.reduceMonth=()=>{if(!this.preBtnDisabled){if("year"===this.clickType&&this.yearCommon(this.yearRegion[0]-10),"month"===this.clickType&&this.year--,"day"===this.clickType){const t=--this.month;this.common(t)}this.preBtnDisabled=!this._hasPreviousPage(),this.nextBtnDisabled=!this._hasNextPage()}},this.increaseMonth=()=>{if(!this.nextBtnDisabled){if("year"===this.clickType&&this.yearCommon(this.yearRegion[1]+1),"month"===this.clickType&&this.year++,"day"===this.clickType){const t=++this.month;this.common(t)}this.preBtnDisabled=!this._hasPreviousPage(),this.nextBtnDisabled=!this._hasNextPage()}},this.changeYear=t=>{this.yearDisable(t)||(this.year=t,this.common(this.month),this.preBtnDisabled=!this._hasPreviousPage(),this.nextBtnDisabled=!this._hasNextPage())},this.changeMonth=t=>{if(this.monthDisable(t.value-1))return;let e=t.value;this.common(--e),this.preBtnDisabled=!this._hasPreviousPage(),this.nextBtnDisabled=!this._hasNextPage()},this.selectDay=t=>({"calendar-style":!0,"current-day":+this.todayDate==+t,"not-currentmonth":+t<this.firstDay||+t>this.lastDay,"select-date":void 0!==this.value&&+this.value==+t,disable:+t<+this.minDateState||+t>+this.maxDateState}),this.monthDisable=t=>{const e=void 0===this.minDate||this.minDateState.getFullYear()<this.year||!this._hasPreviousPage()&&this.minDateState.getMonth()<=t,a=void 0===this.maxDate||this.maxDateState.getFullYear()>this.year||!this._hasNextPage()&&this.maxDateState.getMonth()>=t,i=void 0!==this.minDate&&void 0!==this.maxDate&&this.minDateState.getFullYear()<this.year&&this.maxDateState.getFullYear()>this.year;return!(void 0===this.minDate&&void 0===this.maxDate)&&(i||!e||!a)},this.yearDisable=t=>{const e=void 0===this.minDate&&void 0===this.maxDate,a=void 0!==this.minDate&&this.minDateState.getFullYear()>t,i=void 0!==this.maxDate&&this.maxDateState.getFullYear()<t,s=void 0!==this.minDate&&void 0!==this.maxDate&&this.minDateState.getFullYear()<=t&&this.maxDateState.getFullYear()>=t;return!e&&!s&&(a||i)},this.changeDay=t=>{if(+this.minDateState>+t||+this.maxDateState<+t)return;this.value=t;const e=(a=t,(void 0!==(i=this.formatPattern)?i:"yyyy-MM-dd").replace(s,(t=>(t in d?d[t](a):t).toString())));var a,i;this.liChange.emit({value:e,localUTC:t})},this.common=t=>{const e=new Date(this.year,t),{curYear:a,curMonth:i}=this.getDateTime(e);this.getDate(a,i),this.clickType="year"===this.clickType?"month":"day"},this.getDateTime=t=>({curYear:t.getFullYear(),curMonth:t.getMonth(),curDay:t.getDate(),curHour:t.getHours(),curMin:t.getMinutes(),curSec:t.getSeconds()}),this.init=()=>{var t;const e=null!==(t=this.value)&&void 0!==t?t:new Date,a=this.getDateTime(e);this.getDate(a.curYear,a.curMonth)},this.contentRender=()=>"day"===this.clickType?a("div",{class:"calendar-content"},a("div",{class:"calendar-week"},r.map((t=>a("div",{class:"calendar-style"},t)))),a("div",{class:"calendar-date"},this.currentDays.map((t=>a("div",{class:this.selectDay(t),onClick:()=>this.changeDay(t)},t.getDate()))))):"month"===this.clickType?a("div",{class:"calendar-content month-content"},h.map((t=>a("div",{class:{"calendar-month":!0,"current-month":this.todayDate.getMonth()===t.value-1&&this.todayDate.getFullYear()===this.year,"select-date":void 0!==this.value&&+this.value.getMonth()==t.value-1,disable:this.monthDisable(t.value-1)},onClick:()=>this.changeMonth(t)},t.label)))):"year"===this.clickType?a("div",{class:"calendar-content month-content"},this.yearList.map((t=>{var e;return a("div",{class:{"calendar-month":!0,"current-month":this.todayDate.getFullYear()===t,"select-date":void 0!==this.value&&(null===(e=this.value)||void 0===e?void 0:e.getFullYear())===t,disable:this.yearDisable(t)},onClick:()=>this.changeYear(t)},t,"年")}))):void 0,this.headerClick=t=>{switch(console.log(t.target===this.headMonth),t.target){case this.arrowLeft:this.reduceMonth();break;case this.arrowRight:this.increaseMonth();break;case this.headMonth:this.clickType="month",this.preBtnDisabled=!this._hasPreviousPage(),this.nextBtnDisabled=!this._hasNextPage();break;case this.headYear:{this.clickType="year",this.preBtnDisabled=!this._hasPreviousPage(),this.nextBtnDisabled=!this._hasNextPage();const t=10*Math.floor(this.year/10);this.yearCommon(t)}}}}connectedCallback(){this.maxDateState=new Date(this.maxDate),this.minDateState=new Date(this.minDate);const t=this.getDateTime(new Date);this.todayDate=new Date(t.curYear,t.curMonth,t.curDay),this.init(),this.preBtnDisabled=!this._hasPreviousPage(),this.nextBtnDisabled=!this._hasNextPage()}render(){return a(i,null,a("div",{class:"calendar-header",onClick:this.headerClick},a("div",{class:{left:!0,"head-prebtn-disable":this.preBtnDisabled},ref:t=>this.arrowLeft=t},a("span",null)),a("div",{class:"header-content"},a("div",{class:"header-month",style:{display:"day"===this.clickType?"flex":"none"},ref:t=>this.headMonth=t},h[this.month].label),a("div",{class:"header-year",ref:t=>this.headYear=t},"year"===this.clickType?`${this.yearRegion[0]}~${this.yearRegion[1]}`:this.year)),a("div",{class:{right:!0,"head-nextbtn-disable":this.nextBtnDisabled},ref:t=>this.arrowRight=t},a("span",null))),this.contentRender())}};o.style=':host{display:inline-block;--arrow-background:#fff;--arrow-color:#0854a0;--header-color:#0854a0;--day-color:#000;--month-color:#000}.calendar-header{display:-ms-flexbox;display:flex}.calendar-header .left,.calendar-header .right{padding:6px 10px;width:13px;text-align:center;cursor:pointer;border-radius:var(--border-radius);background:var(--arrow-background)}.calendar-header .left>span,.calendar-header .right>span{display:inline-block;padding:4px;border-style:solid;border-color:var(--arrow-color);border-width:0 1px 1px 0}.calendar-header .left:hover,.calendar-header .right:hover{--arrow-background:rgb(206, 243, 252)}.calendar-header .left:active,.calendar-header .right:active{--arrow-background:#0a7bc7;--arrow-color:#fff}.calendar-header .head-prebtn-disable,.calendar-header .head-nextbtn-disable{cursor:not-allowed;--arrow-background:#eee}.calendar-header .head-prebtn-disable span,.calendar-header .head-nextbtn-disable span{--arrow-color:#999}.calendar-header .head-prebtn-disable:hover,.calendar-header .head-nextbtn-disable:hover{--arrow-background:#eee}.calendar-header .head-prebtn-disable:active,.calendar-header .head-nextbtn-disable:active{--arrow-background:#eee;--arrow-color:#999}.calendar-header .left>span{-webkit-transform:rotate(135deg);transform:rotate(135deg)}.calendar-header .right>span{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.calendar-header .header-content{display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-ms-flex:1;flex:1}.calendar-header .header-content>div{width:100%;cursor:pointer;border-radius:var(--border-radius);text-align:center;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;background:var(--arrow-background);color:var(--header-color)}.calendar-header .header-content>div:hover{--arrow-background:rgb(206, 243, 252)}.calendar-header .header-content>div:active{--arrow-background:#0a7bc7;--header-color:#fff}.calendar-content{text-align:center;width:15rem;height:14rem}.calendar-content .calendar-style{display:inline-block;width:2rem;height:2rem;text-align:center;line-height:2rem}.calendar-content .select-date{background-color:#0854a0;color:#fff}.calendar-date .calendar-style{-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid transparent;cursor:pointer;color:var(--day-color)}.calendar-date .calendar-style:hover{background:#cef3fc;border:1px dashed #666;--day-color:#000000}.calendar-date .calendar-style:nth-child(7n),.calendar-date .calendar-style:nth-child(7n+1){--day-color:red}.calendar-date .current-day::after{content:"";display:inline-block;--day-color:#0854a0;width:6px;height:6px;border-radius:50%;background:#0854a0;position:absolute}.calendar-date .not-currentmonth{--day-color:#d6d1d1!important}.calendar-date .select-date{background-color:#0854a0;--day-color:#fff}.calendar-date .disable{--day-color:#d6d1d1 !important;cursor:not-allowed}.month-content{padding:1rem 0;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-sizing:border-box;box-sizing:border-box}.month-content .calendar-month{width:5rem;height:3rem;line-height:3rem;background-color:#f0f0f0;border:1px solid #fff;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer}.month-content .calendar-month:hover{background-color:#cef3fc}.month-content .calendar-month:active{border:1px dashed #666}.month-content .current-month::after{content:"";display:inline-block;color:#0854a0;width:6px;height:6px;border-radius:50%;background:#0854a0;position:relative;top:-12px}.month-content .select-date{background-color:#0854a0;color:#fff}.month-content .disable{color:#d6d1d1;cursor:not-allowed}.month-content .disable:hover{background-color:#f0f0f0}';export{o as li_calendar}