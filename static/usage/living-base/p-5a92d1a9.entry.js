import{r as t,c as o,h as i,H as a,g as e}from"./p-f27c1a9d.js";import{c as n}from"./p-fdf6920f.js";import{e as s}from"./p-821ec953.js";function r(t,o,i,a=20,e=0){const n=[];if(e>=a)return n;const s=t=>{const n=t.assignedNodes().filter((t=>1===t.nodeType));return n.length>0?r(n[0].parentElement,o,i,a,e+1):[]},l=Array.from(t.children||[]);for(const t of l)o(t)||(i(t)&&n.push(t),null!=t.shadowRoot?n.push(...r(t.shadowRoot,o,i,a,e+1)):"SLOT"===t.tagName?n.push(...s(t)):n.push(...r(t,o,i,a,e+1)));return n}function l(t){return t.hasAttribute("hidden")||t.hasAttribute("aria-hidden")&&"false"!==t.getAttribute("aria-hidden")||"none"===t.style.display||"0"===t.style.opacity||"hidden"===t.style.visibility||"collapse"===t.style.visibility}function d(t){return"-1"!==t.getAttribute("tabindex")&&!l(t)&&!function(t){return t.hasAttribute("disabled")||t.hasAttribute("aria-disabled")&&"false"!==t.getAttribute("aria-disabled")}(t)&&(t.hasAttribute("tabindex")||(t instanceof HTMLAnchorElement||t instanceof HTMLAreaElement)&&t.hasAttribute("href")||t instanceof HTMLButtonElement||t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement||t instanceof HTMLIFrameElement)}
/**
 * @license
 * Scale https://github.com/telekom/scale
 *
 * Copyright (c) 2021 Egor Kirpichev and contributors, Deutsche Telekom AG
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */function c(t,o,i){const a=t.animate(o,Object.assign(Object.assign({},i),{fill:"both"}));return a.addEventListener("finish",(()=>{a.commitStyles(),a.cancel()})),a}const h={easing:"cubic-bezier(0.390, 0.575, 0.565, 1.000)"},p={fadeIn:[Object.assign(Object.assign({offset:0},h),{opacity:0}),Object.assign(Object.assign({offset:1},h),{opacity:1})],fadeOut:[Object.assign(Object.assign({offset:0},h),{opacity:1}),Object.assign(Object.assign({offset:1},h),{opacity:0})],fadeInTop:[Object.assign(Object.assign({offset:0},h),{opacity:0,top:"-3rem"}),Object.assign(Object.assign({offset:1},h),{opacity:1,top:0})]},b="ResizeObserver"in window,m=class{constructor(i){t(this,i),this.liBeforeClose=o(this,"li-before-close",7),this.liClose=o(this,"li-close",7),this.liOpen=o(this,"li-open",7),this.focusableElement=[],this.bodyOverflowValue="",this.hasActionSlot=!1,this.hasBody=!1,this.hasScroll=!1,this.isOpen=this.opened||!1,this.allowInjectingStyleToBody=!1,this.alignActions="right",this.closeButtonLabel="关闭模态弹窗",this.closeButtonTitle="关闭",this.duration=200,this.opened=!1,this.omitCloseButton=!1,this.size="default",this.handleBottomFocus=()=>{this.attemptFocus(this.getLastFocusableElement())},this.handleKeypress=t=>{this.opened&&"Escape"===t.key&&this.emitBeforeClose("ESCAPE_KEY")}}openedChanged(t){!0===t?(this.open(),this.allowInjectingStyleToBody&&(this.bodyOverflowValue=document.body.style.overflow,document.body.style.setProperty("overflow","hidden"))):(this.close(),this.allowInjectingStyleToBody&&document.body.style.setProperty("overflow",this.bodyOverflowValue))}emitBeforeClose(t){s(this,"li-before-close",{trigger:t}).some((t=>t.defaultPrevented))||(this.opened=!1)}connectedCallback(){}componentWillLoad(){}componentDidLoad(){this.focusableElement=r(this.el.shadowRoot,(t=>l(t)||t.matches("[data-focus-trap-edge]")),d),b&&(this.resizeObserver=new ResizeObserver((()=>{this.setHasScroll()})),this.resizeObserver.observe(this.modalBody)),this.setHasScroll()}componentWillUpdate(){}componentDidUpdate(){}componentWillRender(){var t;const o=this.el.querySelectorAll('[slot="action"]'),i=Array.from(null===(t=this.el.shadowRoot)||void 0===t?void 0:t.querySelectorAll("slot")).find((t=>!t.name));this.hasActionSlot=o.length>0,null!=i&&(this.hasBody=i.assignedElements().length>0)}componentShouldRender(){}componentDidRender(){}disconnectedCallback(){this.resizeObserver&&this.resizeObserver.disconnect()}attemptFocus(t){null!==t?t.focus():this.closeButton.focus()}close(){try{c(this.modalContainer,p.fadeOut,{duration:this.duration}).addEventListener("finish",(()=>{this.isOpen=!1,s(this,"liClose")})),this.el.addEventListener("keydown",this.handleKeypress)}catch(t){this.isOpen=!1,s(this,"liClose")}}getCssClassMap(){return n("modal",this.isOpen&&"modal--is-open",this.hasActionSlot&&"modal--has-actions",`modal--align-actions-${this.alignActions}`,this.hasScroll&&"modal--has-scroll",this.hasBody&&"modal--has-body",this.size&&`modal--size-${this.size}`)}getFirstFocusableElement(){return this.focusableElement[0]}getLastFocusableElement(){return this.focusableElement[this.focusableElement.length-1]}handleTopFocus(){this.attemptFocus(this.getFirstFocusableElement())}open(){this.isOpen=!0;try{c(this.modalWindow,p.fadeInTop,{duration:this.duration,delay:.5*this.duration}),c(this.modalContainer,p.fadeIn,{duration:this.duration}).addEventListener("finish",(()=>{this.attemptFocus(this.getFirstFocusableElement()),s(this,"liOpen")})),this.el.addEventListener("keydown",this.handleKeypress)}catch(t){s(this,"liOpen")}}setHasScroll(){const t=this.modalBody;this.hasScroll=t.scrollHeight>t.clientHeight}render(){return i(a,null,this.styles&&i("style",null,this.styles),i("div",{class:this.getCssClassMap(),ref:t=>this.modalContainer=t,part:n("base",this.isOpen&&"open")},i("div",{class:"modal__backdrop",part:"backdrop",onClick:()=>this.emitBeforeClose("BACKDROP")}),i("div",{"data-focus-trap-edge":!0,onFocus:this.handleTopFocus,tabindex:"0"}),i("div",{class:"modal__window",part:n("window",this.size&&`size-${this.size}`),ref:t=>this.modalWindow=t,role:"dialog","aria-modal":"true","aria-label":this.heading},i("div",{class:"modal__header",part:n("header",this.hasScroll&&"has-scroll")},i("h2",{class:"modal__heading",part:"heading"},this.heading),!this.omitCloseButton&&i("button",{ref:t=>this.closeButton=t,part:"close-button",class:"modal__close-button",onClick:()=>this.emitBeforeClose("CLOSE_BUTTON"),"aria-label":this.closeButtonLabel,title:this.closeButtonTitle},i("slot",{name:"close-icon"},i("li-icon-action-circle-close",{decorative:!0})))),i("div",{class:"modal__body-wrapper",ref:t=>this.modalBody=t,part:n("body-wrapper",this.hasBody&&"has-body")},i("div",{class:"modal__body",part:n("body",this.hasBody&&"has-body")},i("slot",null))),i("div",{class:"modal__actions",part:n("actions",this.hasActionSlot&&"has-actions",this.hasScroll&&"has-scroll")},i("slo",{name:"action"}))),i("div",{"data-focus-trap-edge":!0,onFocus:this.handleBottomFocus,tabindex:"0"})))}get el(){return e(this)}static get watchers(){return{opened:["openedChanged"]}}};m.style=':host{--spacing-x:var(--li-token-spacing-unit-x4);--background-overlay:var(\n    --li-token-color-background-backdrop,\n    rgba(108, 108, 108, 0.7)\n  );--max-height-window:calc(100vh - (2 * var(--li-token-spacing-unit-x20)));--radius-window:var(--li-token-radius-large);--box-shadow-window:var(--li-token-shadow-top);--background-window:var(--li-token-color-background-surface);--color-window:var(--li-token-color-text-and-icon-standard);--size-window-small:calc(\n    (6 * var(--li-token-spacing-unit-x14, 3.5rem)) +\n      (5 * var(--li-token-spacing-unit-x8))\n  );--size-window-default:calc(\n    (8 * var(--li-token-spacing-unit-x14, 3.5rem)) +\n      (7 * var(--li-token-spacing-unit-x8))\n  );--size-window-large:calc(\n    (12 * var(--li-token-spacing-unit-x14, 3.5rem)) +\n      (11 * var(--li-token-spacing-unit-x8))\n  );--spacing-x-header:var(--li-token-spacing-unit-x6);--spacing-y-header:var(--li-token-spacing-unit-x6);--border-bottom-header-has-scroll:var(--li-token-line-weight-standard) solid\n    var(--li-token-color-ui-subtle);--font-family-heading:var(--li-token-typography-font-family-sans);--font-size-heading:var(--li-token-typography-font-size-callout);--font-weight-heading:var(--li-token-typography-font-weight-extra-bold);--spacing-close-button:var(--li-token-spacing-unit-x2);--radius-close-button:var(--li-token-radius-standard);--transition-close-button:all var(--li-token-motion-duration-transition)\n    var(--li-token-motion-easing-standard);--box-shadow-close-button-focus:0 0 0 var(--li-token-line-weight-highlight)\n    var(--li-token-color-functional-focus);--color-close-button:var(--li-token-color-text-and-icon-standard);--color-close-button-hover:var(--li-token-color-primary-hovered);--color-close-button-active:var(--li-token-color-primary-pressed);--spacing-x-body-wrapper:var(--li-token-spacing-unit-x6);--spacing-y-body:var(--li-token-spacing-unit-x6);--spacing-actions:var(--li-token-spacing-unit-x6);--spacing-x-actions-slotted:var(--li-token-spacing-unit-x2);--background-actions-has-scroll:var(\n    --li-token-color-background-surface-subtle\n  )}.modal{top:0;left:0;width:100%;bottom:0;display:none;z-index:100;position:fixed;background:var(--background-overlay);-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;padding-left:var(--spacing-x);padding-right:var(--spacing-x)}.modal.modal--is-open{display:-ms-flexbox;display:flex}.modal__backdrop{top:0;left:0;width:100%;height:100%;z-index:0;position:absolute}.modal__window{width:100%;height:auto;display:-ms-flexbox;display:flex;z-index:1;position:relative;overflow-y:auto;-ms-flex-direction:column;flex-direction:column;background-color:var(--background-window);color:var(--color-window);max-height:var(--max-height-window);min-height:var(--min-height-window);border-radius:var(--radius-window);-webkit-box-shadow:var(--box-shadow-window);box-shadow:var(--box-shadow-window)}.modal__window .modal__body-wrapper{overflow-y:auto;-ms-flex-negative:1;flex-shrink:1;-ms-flex-positive:1;flex-grow:1}.modal--size-small .modal__window{max-width:var(--size-window-small)}.modal--size-default .modal__window{max-width:var(--size-window-default)}.modal--size-large .modal__window{max-width:var(--size-window-large)}@media (max-height: 30em){.modal__window{max-height:calc(100vh - var(--li-token-spacing-unit-x6))}}.modal__window:after{top:0;left:0;width:100%;border:1px solid transparent;height:100%;content:"";display:block;position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;border-radius:var(--radius-window)}.modal__header{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;-ms-flex-negative:0;flex-shrink:0;-ms-flex-pack:justify;justify-content:space-between;margin-left:var(--spacing-x-header);margin-right:var(--spacing-x-header);padding-top:var(--spacing-y-header);padding-bottom:var(--spacing-y-header)}.modal--has-scroll .modal__header{border-bottom:var(--border-bottom-header-has-scroll)}.modal__heading{margin:0;font-family:var(--font-family-heading);font-size:var(--font-size-heading);font-weight:var(--font-weight-heading)}.modal__close-button{-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;padding:var(--spacing-close-button);margin-bottom:calc(-2 * var(--spacing-close-button));border:0;border-radius:var(--radius-close-button);outline:none;color:var(--color-close-button);background:transparent;-webkit-transition:var(--transition-close-button);transition:var(--transition-close-button);-webkit-transform:translate(var(--spacing-close-button), calc(-1 * var(--spacing-close-button)));transform:translate(var(--spacing-close-button), calc(-1 * var(--spacing-close-button)));-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.modal__close-button:focus{-webkit-box-shadow:var(--box-shadow-close-button-focus);box-shadow:var(--box-shadow-close-button-focus)}.modal__close-button:hover{color:var(--color-close-button-hover)}.modal__close-button:active{color:var(--color-close-button-active)}.modal__body-wrapper{padding-left:var(--spacing-x-body-wrapper);padding-right:var(--spacing-x-body-wrapper)}.modal--has-body .modal__body-wrapper{min-height:var(--li-token-spacing-related-lg)}.modal--has-body .modal__body{margin-top:var(--spacing-y-body);margin-bottom:var(--spacing-y-body)}.modal__actions{display:none;-ms-flex-negative:0;flex-shrink:0;-ms-flex-pack:end;justify-content:flex-end;padding:var(--spacing-actions)}.modal__actions ::slotted(*){margin-left:var(--spacing-x-actions-slotted)}.modal--has-actions .modal__actions{display:-ms-flexbox;display:flex}.modal--align-actions-left .modal__actions{-ms-flex-pack:start;justify-content:flex-start}.modal--has-scroll .modal__actions{background-color:var(--background-actions-has-scroll)}';export{m as li_modal}