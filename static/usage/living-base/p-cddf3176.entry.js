import{r as t,h as s,H as a,g as e}from"./p-f27c1a9d.js";const i=class{constructor(s){t(this,s),this.player=null,this.loopCount=0,this.rafId=null,this.behavior="scroll",this.direction="up",this.loop=-1,this.scrollAmount=6,this.scrollDelay=85}propsChanged(){this.destroy(),this.loopCount=0,this.start()}componentDidLoad(){this.start()}disconnectedCallback(){this.destroy()}async start(){var t;"paused"===(null===(t=this.player)||void 0===t?void 0:t.playState)&&this.player.play(),this.rafId||this.player||(this.rafId=requestAnimationFrame((()=>{this.rafId=null,this.continue()})))}async stop(){var t;null===(t=this.player)||void 0===t||t.pause()}destroy(){if(this.rafId)return cancelAnimationFrame(this.rafId),void(this.rafId=null);if(this.player){const t=this.player;this.player=null,t.cancel()}}getGetMetrics(){this.mover.style.width="-webkit-max-content";const t=getComputedStyle(this.mover),s=getComputedStyle(this.el);return this.mover.style.width="",{contentWidth:parseFloat(t.width),contentHeight:parseFloat(t.height),marqueeWidth:parseFloat(s.width),marqueeHeight:parseFloat(s.height)}}getAnimationParameters(){const t=this.getGetMetrics(),s=t.marqueeWidth+t.contentWidth,a=t.marqueeHeight+t.contentHeight,e=t.marqueeWidth-t.contentWidth,i=t.marqueeHeight-t.contentHeight,r={transformBegin:"",transformEnd:"",distance:0};switch(this.behavior){case"scroll":default:switch(this.direction){case"right":r.transformBegin=`translateX(-${t.contentWidth}px)`,r.transformEnd=`translateX(${t.marqueeWidth}px)`,r.distance=s;break;case"up":r.transformBegin=`translateY(${t.marqueeHeight}px)`,r.transformEnd=`translateY(-${t.contentHeight}px)`,r.distance=a;break;case"down":r.transformBegin=`translateY(-${t.contentHeight}px)`,r.transformEnd=`translateY(${t.marqueeHeight}px)`,r.distance=a;break;case"left":default:r.transformBegin=`translateX(${t.marqueeWidth}px)`,r.transformEnd="translateX(-100%)",r.distance=s}break;case"alternate":switch(this.direction){case"right":r.transformBegin="translateX(0)",r.transformEnd=`translateX(${e}px)`,r.distance=e;break;case"up":r.transformBegin=`translateY(${i}px)`,r.transformEnd="translateY(0)",r.distance=i;break;case"down":r.transformBegin="translateY(0)",r.transformEnd=`translateY(${i}px)`,r.distance=i;break;case"left":default:r.transformBegin=`translateX(${e}px)`,r.transformEnd="translateX(0)",r.distance=e}if(this.loopCount%2){const t=r.transformBegin;r.transformBegin=r.transformEnd,r.transformEnd=t}break;case"slide":switch(this.direction){case"right":r.transformBegin=`translateX(-${t.contentWidth}px)`,r.transformEnd=`translateX(${e}px)`,r.distance=t.marqueeWidth;break;case"up":r.transformBegin=`translateY(${t.marqueeHeight}px)`,r.transformEnd="translateY(0)",r.distance=t.marqueeHeight;break;case"down":r.transformBegin=`translateY(-${t.contentHeight}px)`,r.transformEnd=`translateY(${i}px)`,r.distance=t.marqueeHeight;break;case"left":default:r.transformBegin=`translateX(${t.marqueeWidth}px)`,r.transformEnd="translateX(0)",r.distance=t.marqueeWidth}}return r}shouldContinue(){let t=this.loop;return t<=0&&"slide"===this.behavior&&(t=1),t<=0||this.loopCount<t}continue(){if(!this.shouldContinue())return this.player=null,void this.el.dispatchEvent(new CustomEvent("finish"));const t=this.getAnimationParameters(),s=this.mover.animate([{transform:t.transformBegin},{transform:t.transformEnd}],{duration:t.distance*this.scrollDelay/this.scrollAmount,fill:"forwards"});this.player=s;const a=()=>{s===this.player&&(++this.loopCount,this.continue())};s.removeEventListener("finish",a),s.addEventListener("finish",a)}render(){return s(a,null,s("div",{ref:t=>this.mover=t},s("slot",null)))}get el(){return e(this)}static get watchers(){return{behavior:["propsChanged"],direction:["propsChanged"],loop:["propsChanged"],scrollAmount:["propsChanged"],scrollDelay:["propsChanged"]}}};i.style=":host{display:inline-block;width:-webkit-fill-available;overflow:hidden;text-align:initial}";export{i as li_marquee}